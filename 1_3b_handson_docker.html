
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data Engineering class at ISAE-Supaero as part of the SDD program">
      
      
      
        <link rel="canonical" href="https://supaerodatascience.github.io/DE/1_3b_handson_docker.html">
      
      
        <link rel="prev" href="1_3a_containers.html">
      
      
        <link rel="next" href="1_4a_gcp_workflow.html">
      
      
        
      
      
      <link rel="icon" href="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>2. Hands-on (Docker) - Data Engineering</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-hands-on" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Data Engineering" class="md-header__button md-logo" aria-label="Data Engineering" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. Hands-on (Docker)
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SupaeroDataScience/DE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SupaeroDataScience/DE
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Data Engineering" class="md-nav__button md-logo" aria-label="Data Engineering" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico" alt="logo">

    </a>
    Data Engineering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SupaeroDataScience/DE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SupaeroDataScience/DE
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Syllabus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    DE Fundamentals
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    DE Fundamentals
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ctf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CTF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Storage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Storage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_1_databases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_3_postgres.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ETL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ETL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_2_ETL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_5_airlife.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_4_project.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Computation
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Computation
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_1_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cloud Computing & Google Cloud Platform
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cloud Computing & Google Cloud Platform
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2a_cloud.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Lecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2b_handson_setup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Hands-on (Setup)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2c_handson_codespace.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. Hands-on (Remote Development)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2d_handson_gcp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. Hands-on (GCP)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Containers, Docker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Containers, Docker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_3a_containers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Lecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    2. Hands-on (Docker)
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="1_3b_handson_docker.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Hands-on (Docker)
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-abstract" class="md-nav__link">
    <span class="md-ellipsis">
      
        0. Abstract
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-manipulating-docker-for-the-1st-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Manipulating docker for the 1st time
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Manipulating docker for the 1st time">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Docker Run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-terminology" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Terminology
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-webapps-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Webapps with Docker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Webapps with Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-run-a-static-website-in-a-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Run a static website in a container
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-docker-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Docker Images
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-create-your-first-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Create your first image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#231-create-a-python-flask-app-that-displays-random-cat-pix" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1 Create a Python Flask app that displays random cat pix
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3.1 Create a Python Flask app that displays random cat pix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apppy" class="md-nav__link">
    <span class="md-ellipsis">
      
        app.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirementstxt" class="md-nav__link">
    <span class="md-ellipsis">
      
        requirements.txt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatesindexhtml" class="md-nav__link">
    <span class="md-ellipsis">
      
        templates/index.html
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-write-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2 Write a Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-build-the-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.3 Build the image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-run-your-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.4 Run your image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-dockerfile-commands-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.5 Dockerfile commands summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-build-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.6 Build context
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-running-cli-apps-with-docker-passing-data-at-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Running CLI Apps with Docker: Passing Data at Runtime
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Running CLI Apps with Docker: Passing Data at Runtime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-volume-mounting-sharing-files-with-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Volume Mounting: Sharing Files with Containers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-a-local-cli-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 A local CLI application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-packaging-it-in-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Packaging it in a Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-running-the-cli-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Running the CLI App
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-mounting-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 Mounting volumes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-troubleshooting-volume-mounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6 Troubleshooting Volume Mounts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-containers-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Containers Registry
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youve-learned" class="md-nav__link">
    <span class="md-ellipsis">
      
        What You've Learned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's Next
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-pre-built-data-science-environments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Pre-built Data Science Environments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-docker-compose-preview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Docker Compose Preview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-cloud-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Cloud Build
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-going-further" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Going Further
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-docker-build-context-and-dockerignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Docker Build Context and .dockerignore
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced - Docker Build Context and .dockerignore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-build-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        The build context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dockerignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using .dockerignore
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging Containers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-container-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        View container logs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-a-shell-inside-a-running-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get a shell inside a running container
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspect-container-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inspect container details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-a-failed-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug a failed build
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workshop GCP & Docker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workshop GCP & Docker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_4a_gcp_workflow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. GCP Compute Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_4b_docker_workflow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Docker Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_4c_deployment_workflow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. GCP Deployment Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workshop Deploy your ML model into production
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workshop Deploy your ML model into production
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_5a_deployment.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. Lecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_5b_deployment_be.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. Deploy your ML model into production
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_6_conclusion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Recap & Reading List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_7_appendixes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appendixes & Technical Notions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Data Distribution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Data Distribution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_1_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_5_mapreduce.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hadoop and MapReduce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Orchestration & Kubernetes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Orchestration & Kubernetes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_2_orchestration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lectures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_3_kub_handson.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_6_spark.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spark
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_8_dask.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dask on Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_9_project.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dask project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-abstract" class="md-nav__link">
    <span class="md-ellipsis">
      
        0. Abstract
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-manipulating-docker-for-the-1st-time" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Manipulating docker for the 1st time
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Manipulating docker for the 1st time">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-docker-run" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 Docker Run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-terminology" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Terminology
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-webapps-with-docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Webapps with Docker
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Webapps with Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-run-a-static-website-in-a-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Run a static website in a container
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-docker-images" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Docker Images
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-create-your-first-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Create your first image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#231-create-a-python-flask-app-that-displays-random-cat-pix" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.1 Create a Python Flask app that displays random cat pix
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.3.1 Create a Python Flask app that displays random cat pix">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apppy" class="md-nav__link">
    <span class="md-ellipsis">
      
        app.py
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requirementstxt" class="md-nav__link">
    <span class="md-ellipsis">
      
        requirements.txt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templatesindexhtml" class="md-nav__link">
    <span class="md-ellipsis">
      
        templates/index.html
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232-write-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.2 Write a Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233-build-the-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.3 Build the image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234-run-your-image" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.4 Run your image
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235-dockerfile-commands-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.5 Dockerfile commands summary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236-build-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3.6 Build context
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-running-cli-apps-with-docker-passing-data-at-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Running CLI Apps with Docker: Passing Data at Runtime
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Running CLI Apps with Docker: Passing Data at Runtime">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-volume-mounting-sharing-files-with-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Volume Mounting: Sharing Files with Containers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-a-local-cli-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 A local CLI application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-packaging-it-in-a-dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Packaging it in a Dockerfile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-running-the-cli-app" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Running the CLI App
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-mounting-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.5 Mounting volumes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-troubleshooting-volume-mounts" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.6 Troubleshooting Volume Mounts
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-containers-registry" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Containers Registry
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youve-learned" class="md-nav__link">
    <span class="md-ellipsis">
      
        What You've Learned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's Next
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-pre-built-data-science-environments" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Pre-built Data Science Environments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-docker-compose-preview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Docker Compose Preview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-cloud-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Cloud Build
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-going-further" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Going Further
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-docker-build-context-and-dockerignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced - Docker Build Context and .dockerignore
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced - Docker Build Context and .dockerignore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-build-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        The build context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-dockerignore" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using .dockerignore
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debugging Containers
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-container-logs" class="md-nav__link">
    <span class="md-ellipsis">
      
        View container logs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-a-shell-inside-a-running-container" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get a shell inside a running container
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inspect-container-details" class="md-nav__link">
    <span class="md-ellipsis">
      
        Inspect container details
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-a-failed-build" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug a failed build
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="docker-hands-on">Docker Hands-on<a class="headerlink" href="#docker-hands-on" title="Permanent link">ðŸ”—</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are lost, <code>docker system prune</code> will remove dangling images and stopped containers.</p>
</div>
<h2 id="0-abstract">0. Abstract<a class="headerlink" href="#0-abstract" title="Permanent link">ðŸ”—</a></h2>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>In this hands-on, you will discover the basics of Docker and learn to manipulate
images and containers.</p>
</div>
<p>You should be inside the Github Codespace you created and have google cloud SDK installed in it</p>
<p>If not, refer to the previous tutorial and do step 2 and 3</p>
<p>This codespace has everything you need, including docker</p>
<p>If you want to do everything from your linux machine you can <a href="https://docs.docker.com/engine/install/ubuntu/">install docker</a> but I don't recommend it for now</p>
<h2 id="1-manipulating-docker-for-the-1st-time">1. Manipulating docker for the 1st time<a class="headerlink" href="#1-manipulating-docker-for-the-1st-time" title="Permanent link">ðŸ”—</a></h2>
<p>Source: <a href="https://github.com/docker/labs">https://github.com/docker/labs</a></p>
<p>To get started, let's run the following in our terminal:</p>
<div class="highlight"><pre><span></span><code>$ docker pull alpine
</code></pre></div>
<p>The <code>pull</code> command fetches the alpine <strong>image</strong> from the <strong>Docker registry</strong> and saves it in our system. You can use the <code>docker images</code> command to see a list of all images on your system.
<div class="highlight"><pre><span></span><code>$ docker images
REPOSITORY              TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
alpine                 latest              c51f86c28340        4 weeks ago         1.109 MB
hello-world             latest              690ed74de00f        5 months ago        960 B
</code></pre></div></p>
<h3 id="11-docker-run">1.1 Docker Run<a class="headerlink" href="#11-docker-run" title="Permanent link">ðŸ”—</a></h3>
<p>Great! Let's now run a Docker <strong>container</strong> based on this image. To do that you are going to use the <code>docker run</code> command.</p>
<div class="highlight"><pre><span></span><code>$ docker run alpine ls -l
total 48
drwxr-xr-x    2 root     root          4096 Mar  2 16:20 bin
drwxr-xr-x    5 root     root           360 Mar 18 09:47 dev
drwxr-xr-x   13 root     root          4096 Mar 18 09:47 etc
drwxr-xr-x    2 root     root          4096 Mar  2 16:20 home
drwxr-xr-x    5 root     root          4096 Mar  2 16:20 lib
......
......
</code></pre></div>
<p>What happened? Behind the scenes, a lot of stuff happened. When you call <code>run</code>,</p>
<ol>
<li>The Docker client contacts the Docker daemon</li>
<li>The Docker daemon checks local store if the image (alpine in this case) is available locally, and if not, downloads it from Docker Hub. (Since we have issued <code>docker pull alpine</code> before, the download step is not necessary)</li>
<li>The Docker daemon creates the container and then runs a command in that container.</li>
<li>The Docker daemon streams the output of the command to the Docker client</li>
</ol>
<p>When you run <code>docker run alpine</code>, you provided a command (<code>ls -l</code>), so Docker started the command specified and you saw the listing.</p>
<p>Let's try something more exciting.</p>
<p><div class="highlight"><pre><span></span><code>$ docker run alpine echo &quot;hello from alpine&quot;
hello from alpine
</code></pre></div>
OK, that's some actual output. In this case, the Docker client dutifully ran the <code>echo</code> command in our alpine container and then exited it. If you've noticed, all of that happened pretty quickly. Imagine booting up a virtual machine, running a command and then killing it. Now you know why they say containers are fast!</p>
<p>Try another command.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>alpine<span class="w"> </span>/bin/sh
</code></pre></div>
<p>Wait, nothing happened! Is that a bug? Well, no. These interactive shells will exit after running any scripted commands, unless they are run in an interactive terminal - so for this example to not exit, you need to <code>docker run -it alpine /bin/sh</code>.</p>
<p>You are now inside the container shell and you can try out a few commands like <code>ls -l</code>, <code>uname -a</code> and others. Exit out of the container by giving the <code>exit</code> command.</p>
<p>Ok, now it's time to see the <code>docker ps</code> command. The <code>docker ps</code> command shows you all containers that are currently running.</p>
<div class="highlight"><pre><span></span><code>$ docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
</code></pre></div>
<p>Since no containers are running, you see a blank line. Let's try a more useful variant: <code>docker ps -a</code></p>
<div class="highlight"><pre><span></span><code>$ docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES
36171a5da744        alpine              &quot;/bin/sh&quot;                5 minutes ago       Exited (0) 2 minutes ago                        fervent_newton
a6a9d46d0b2f        alpine             &quot;echo &#39;hello from alp&quot;    6 minutes ago       Exited (0) 6 minutes ago                        lonely_kilby
ff0a5c3750b9        alpine             &quot;ls -l&quot;                   8 minutes ago       Exited (0) 8 minutes ago                        elated_ramanujan
c317d0a9e3d2        hello-world         &quot;/hello&quot;                 34 seconds ago      Exited (0) 12 minutes ago                       stupefied_mcclintock
</code></pre></div>
<p>What you see above is a list of all containers that you ran. Notice that the <code>STATUS</code> column shows that these containers exited a few minutes ago. You're probably wondering if there is a way to run more than just one command in a container. Let's try that now:</p>
<p><div class="highlight"><pre><span></span><code>$ docker run -it alpine /bin/sh
/ # ls
bin      dev      etc      home     lib      linuxrc  media    mnt      proc     root     run      sbin     sys      tmp      usr      var
/ # uname -a
Linux 97916e8cb5dc 4.4.27-moby #1 SMP Wed Oct 26 14:01:48 UTC 2016 x86_64 Linux
</code></pre></div>
Running the <code>run</code> command with the <code>-it</code> flags attaches us to an interactive tty in the container. Now you can run as many commands in the container as you want. Take some time to run your favorite commands.</p>
<p>That concludes a whirlwind tour of the <code>docker run</code> command which would most likely be the command you'll use most often. It makes sense to spend some time getting comfortable with it. To find out more about <code>run</code>, use <code>docker run --help</code> to see a list of all flags it supports. As you proceed further, we'll see a few more variants of <code>docker run</code>.</p>
<h3 id="12-terminology">1.2 Terminology<a class="headerlink" href="#12-terminology" title="Permanent link">ðŸ”—</a></h3>
<p>In the last section, you saw a lot of Docker-specific jargon which might be confusing to some. So before you go further, let's clarify some terminology that is used frequently in the Docker ecosystem.</p>
<ul>
<li><em>Images</em> - The file system and configuration of our application which are used to create containers. To find out more about a Docker image, run <code>docker inspect alpine</code>. In the demo above, you used the <code>docker pull</code> command to download the <strong>alpine</strong> image. When you executed the command <code>docker run hello-world</code>, it also did a <code>docker pull</code> behind the scenes to download the <strong>hello-world</strong> image.</li>
<li><em>Containers</em> - Running instances of Docker images &mdash; containers run the actual applications. A container includes an application and all of its dependencies. It shares the kernel with other containers, and runs as an isolated process in user space on the host OS. You created a container using <code>docker run</code> which you did using the alpine image that you downloaded. A list of running containers can be seen using the <code>docker ps</code> command.</li>
<li><em>Docker daemon</em> - The background service running on the host that manages building, running and distributing Docker containers.</li>
<li><em>Docker client</em> - The command line tool that allows the user to interact with the Docker daemon.</li>
<li><em>Docker Hub</em> - A <a href="https://hub.docker.com/">registry</a> of Docker images, where you can find trusted and enterprise ready containers, plugins, and Docker editions. You'll be using this later in this tutorial.</li>
</ul>
<div class="admonition success">
<p class="admonition-title">What You Learned</p>
<ul>
<li><strong>docker pull</strong>: Download images from a registry (Docker Hub)</li>
<li><strong>docker run</strong>: Create and start a container from an image</li>
<li><strong>docker ps</strong>: List running containers (<code>-a</code> for all, including stopped)</li>
<li><strong>Interactive mode</strong>: Use <code>-it</code> flags to get a shell inside a container</li>
<li><strong>Key vocabulary</strong>: Images (blueprints) vs Containers (running instances)</li>
</ul>
</div>
<h2 id="2-webapps-with-docker">2. Webapps with Docker<a class="headerlink" href="#2-webapps-with-docker" title="Permanent link">ðŸ”—</a></h2>
<p>Source: <a href="https://github.com/docker/labs">https://github.com/docker/labs</a></p>
<p>Great! So you have now looked at <code>docker run</code>, played with a Docker container and also got the hang of some terminology. Armed with all this knowledge, you are now ready to get to the real stuff &#8212; deploying web applications with Docker.</p>
<h3 id="21-run-a-static-website-in-a-container">2.1 Run a static website in a container<a class="headerlink" href="#21-run-a-static-website-in-a-container" title="Permanent link">ðŸ”—</a></h3>
<blockquote>
<p><strong>Note:</strong> Code for this section is in this repo in the website directory</p>
</blockquote>
<p>Let's start by taking baby-steps. First, we'll use Docker to run a static website in a container. The website is based on an existing image. We'll pull a Docker image from Docker Hub, run the container, and see how easy it is to set up a web server.</p>
<p>The image that you are going to use is a single-page website that was already created for this demo and is available on Docker Hub as <a href="https://hub.docker.com/r/dockersamples/static-site"><code>dockersamples/static-site</code></a>. You can download and run the image directly in one go using <code>docker run</code> as follows.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>dockersamples/static-site
</code></pre></div>
<p>Files:</p>
<ul>
<li><a href="https://github.com/docker/labs/blob/master/beginner/static-site/Dockerfile">Dockerfile</a></li>
<li><a href="https://github.com/docker/labs/blob/master/beginner/static-site/Hello_docker.html">hello_docker.html</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> The <code>-d</code> flag enables <strong>detached mode</strong>, which detaches the running container from the terminal/shell and returns your prompt after the container starts.</p>
</blockquote>
<p>So, what happens when you run this command?</p>
<p>Since the image doesn't exist on your Docker host, the Docker daemon first fetches it from the registry and then runs it as a container.</p>
<p>Now that the server is running, do you see the website? What port is it running on? And more importantly, how do you access the container directly from our host machine?</p>
<p>Actually, you probably won't be able to answer any of these questions yet! &#9786; In this case, the client didn't tell the Docker Engine to publish any of the ports, so you need to re-run the <code>docker run</code> command to add this instruction.</p>
<p>Let's re-run the command with some new flags to publish ports and pass your name to the container to customize the message displayed. We'll use the <em>-d</em> option again to run the container in detached mode.</p>
<p>First, stop the container that you have just launched. In order to do this, we need the container ID.</p>
<p>Since we ran the container in detached mode, we don't have to launch another terminal to do this. Run <code>docker ps</code> to view the running containers.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>ps
CONTAINER<span class="w"> </span>ID<span class="w">        </span>IMAGE<span class="w">                  </span>COMMAND<span class="w">                  </span>CREATED<span class="w">             </span>STATUS<span class="w">              </span>PORTS<span class="w">               </span>NAMES
a7a0e504ca3e<span class="w">        </span>dockersamples/static-site<span class="w">   </span><span class="s2">&quot;/bin/sh -c &#39;cd /usr/&quot;</span><span class="w">   </span><span class="m">28</span><span class="w"> </span>seconds<span class="w"> </span>ago<span class="w">      </span>Up<span class="w"> </span><span class="m">26</span><span class="w"> </span>seconds<span class="w">       </span><span class="m">80</span>/tcp,<span class="w"> </span><span class="m">443</span>/tcp<span class="w">     </span>stupefied_mahavira
</code></pre></div>
<p>Check out the <code>CONTAINER ID</code> column. You will need to use this <code>CONTAINER ID</code> value, a long sequence of characters, to identify the container you want to stop, and then to remove it. The example below provides the <code>CONTAINER ID</code> on our system; you should use the value that you see in your terminal.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span>a7a0e504ca3e
$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w">   </span>a7a0e504ca3e
</code></pre></div>
<blockquote>
<p><strong>Note:</strong> A cool feature is that you do not need to specify the entire <code>CONTAINER ID</code>. You can just specify a few starting characters and if it is unique among all the containers that you have launched, the Docker client will intelligently pick it up.</p>
</blockquote>
<p>Now, let's launch a container in <strong>detached</strong> mode as shown below:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>static-site<span class="w"> </span>-e<span class="w"> </span><span class="nv">AUTHOR</span><span class="o">=</span><span class="s2">&quot;Your Name&quot;</span><span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>dockersamples/static-site
e61d12292d69556eabe2a44c16cbd54486b2527e2ce4f95438e504afb7b02810
</code></pre></div>
<p>In the above command:</p>
<ul>
<li><code>-d</code> will create a container with the process detached from our terminal</li>
<li><code>-p 8080:80</code> maps port 8080 on your host to port 80 in the container (format: <code>host:container</code>)</li>
<li><code>-e</code> is how you pass environment variables to the container</li>
<li><code>--name</code> allows you to specify a container name</li>
<li><code>AUTHOR</code> is the environment variable name and <code>Your Name</code> is the value that you can pass</li>
</ul>
<p>You can verify the port mapping by running the <code>docker port</code> command:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>port<span class="w"> </span>static-site
<span class="m">80</span>/tcp<span class="w"> </span>-&gt;<span class="w"> </span><span class="m">0</span>.0.0.0:8080
</code></pre></div>
<p>If you are on Codespace, the port 8080 should be automatically detected. You can also manually <a href="https://docs.github.com/en/codespaces/developing-in-codespaces/forwarding-ports-in-your-codespace">forward port 8080</a> to access the website.</p>
<p>Open <code>http://localhost:8080</code> in your browser to see the website.</p>
<p>You can also run a second webserver at the same time on a different port:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>static-site-2<span class="w"> </span>-e<span class="w"> </span><span class="nv">AUTHOR</span><span class="o">=</span><span class="s2">&quot;Your Name&quot;</span><span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8888</span>:80<span class="w"> </span>dockersamples/static-site
</code></pre></div>
<p><img src="https://raw.githubusercontent.com/docker/labs/master/beginner/images/static.png" title="static"></p>
<p>To deploy this on a real server you would just need to install Docker, and run the above <code>docker</code> command (as in this case you can see the <code>AUTHOR</code> is Docker which we passed as an environment variable).</p>
<p>Now that you've seen how to run a webserver inside a Docker container, how do you create your own Docker image? This is the question we'll explore in the next section.</p>
<p>But first, let's stop and remove the containers since you won't be using them anymore.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span>static-site
$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span>static-site
</code></pre></div>
<p>Let's use a shortcut to remove the second site:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>static-site-2
</code></pre></div>
<p>Run <code>docker ps</code> to make sure the containers are gone.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>ps
CONTAINER<span class="w"> </span>ID<span class="w">        </span>IMAGE<span class="w">               </span>COMMAND<span class="w">             </span>CREATED<span class="w">             </span>STATUS<span class="w">              </span>PORTS<span class="w">               </span>NAMES
</code></pre></div>
<h3 id="22-docker-images">2.2 Docker Images<a class="headerlink" href="#22-docker-images" title="Permanent link">ðŸ”—</a></h3>
<p>In this section, let's dive deeper into what Docker images are. You will build your own image, use that image to run an application locally.</p>
<p>Docker images are the basis of containers. In the previous example, you <strong>pulled</strong> the <em>dockersamples/static-site</em> image from the registry and asked the Docker client to run a container <strong>based</strong> on that image. To see the list of images that are available locally on your system, run the <code>docker images</code> command.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>images
REPOSITORY<span class="w">                  </span>TAG<span class="w">                 </span>IMAGE<span class="w"> </span>ID<span class="w">            </span>CREATED<span class="w">             </span>SIZE
dockersamples/static-site<span class="w">   </span>latest<span class="w">              </span>92a386b6e686<span class="w">        </span><span class="m">2</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">         </span><span class="m">190</span>.5<span class="w"> </span>MB
nginx<span class="w">                       </span>latest<span class="w">              </span>af4b3d7d5401<span class="w">        </span><span class="m">3</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">         </span><span class="m">190</span>.5<span class="w"> </span>MB
python<span class="w">                      </span><span class="m">3</span>.11<span class="w">                </span>1c32174fd534<span class="w">        </span><span class="m">14</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">        </span><span class="m">1</span>.01<span class="w"> </span>GB
postgres<span class="w">                    </span><span class="m">16</span><span class="w">                  </span>88d845ac7a88<span class="w">        </span><span class="m">14</span><span class="w"> </span>hours<span class="w"> </span>ago<span class="w">        </span><span class="m">432</span><span class="w"> </span>MB
redis<span class="w">                       </span><span class="m">7</span>-alpine<span class="w">            </span>4f5f397d4b7c<span class="w">        </span><span class="m">7</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">          </span><span class="m">41</span><span class="w"> </span>MB
alpine<span class="w">                      </span><span class="m">3</span>.18<span class="w">                </span>70c557e50ed6<span class="w">        </span><span class="m">8</span><span class="w"> </span>days<span class="w"> </span>ago<span class="w">          </span><span class="m">7</span>.8<span class="w"> </span>MB
</code></pre></div>
<p>Above is a list of images that I've pulled from the registry and those I've created myself (we'll shortly see how). You will have a different list of images on your machine. The <code>TAG</code> refers to a particular snapshot of the image and the <code>ID</code> is the corresponding unique identifier for that image.</p>
<p>For simplicity, you can think of an image akin to a git repository - images can be <a href="https://docs.docker.com/engine/reference/commandline/commit/">committed</a> with changes and have multiple versions. When you do not provide a specific version number, the client defaults to <code>latest</code>.</p>
<p>For example you could pull a specific version of <code>ubuntu</code> image as follows:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>ubuntu:22.04
</code></pre></div>
<p>If you do not specify the version number of the image then, as mentioned, the Docker client will default to a version named <code>latest</code>.</p>
<p>So for example, the <code>docker pull</code> command given below will pull an image named <code>ubuntu:latest</code>:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>ubuntu
</code></pre></div>
<p>To get a new Docker image you can either get it from a registry (such as Docker Hub) or create your own. There are hundreds of thousands of images available on <a href="https://hub.docker.com">Docker Hub</a>. You can also search for images directly from the command line using <code>docker search</code>.</p>
<p>An important distinction with regard to images is between <em>base images</em> and <em>child images</em>.</p>
<ul>
<li>
<p><strong>Base images</strong> are images that have no parent images, usually images with an OS like ubuntu, alpine or debian.</p>
</li>
<li>
<p><strong>Child images</strong> are images that build on base images and add additional functionality.</p>
</li>
</ul>
<p>Another key concept is the idea of <em>official images</em> and <em>user images</em>. (Both of which can be base images or child images.)</p>
<ul>
<li>
<p><strong>Official images</strong> are Docker sanctioned images. Docker, Inc. sponsors a dedicated team that is responsible for reviewing and publishing all Official Repositories content. This team works in collaboration with upstream software maintainers, security experts, and the broader Docker community. These are not prefixed by an organization or user name. In the list of images above, the <code>python</code>, <code>node</code>, <code>alpine</code> and <code>nginx</code> images are official (base) images. To find out more about them, check out the <a href="https://docs.docker.com/docker-hub/official_repos/">Official Images Documentation</a>.</p>
</li>
<li>
<p><strong>User images</strong> are images created and shared by users like you. They build on base images and add additional functionality. Typically these are formatted as <code>user/image-name</code>. The <code>user</code> value in the image name is your Docker Hub user or organization name.</p>
</li>
</ul>
<h3 id="23-create-your-first-image">2.3 Create your first image<a class="headerlink" href="#23-create-your-first-image" title="Permanent link">ðŸ”—</a></h3>
<blockquote>
<p><strong>Note:</strong> The code for this section is in this repository in the <a href="https://github.com/docker/labs/tree/master/beginner/flask-app">flask-app</a> directory.</p>
</blockquote>
<p>Now that you have a better understanding of images, it's time to create your own. Our goal here is to create an image that sandboxes a small <a href="http://flask.pocoo.org">Flask</a> application.</p>
<p><strong>The goal of this exercise is to create a Docker image which will run a Flask app.</strong></p>
<p>We'll do this by first pulling together the components for a random cat picture generator built with Python Flask, then <em>dockerizing</em> it by writing a <em>Dockerfile</em>. Finally, we'll build the image, and then run it.</p>
<ul>
<li><a href="#231-create-a-python-flask-app-that-displays-random-cat-pix">Create a Python Flask app that displays random cat pix</a></li>
<li><a href="#232-write-a-dockerfile">Write a Dockerfile</a></li>
<li><a href="#233-build-the-image">Build the image</a></li>
<li><a href="#234-run-your-image">Run your image</a></li>
<li><a href="#235-dockerfile-commands-summary">Dockerfile commands summary</a></li>
</ul>
<h3 id="231-create-a-python-flask-app-that-displays-random-cat-pix">2.3.1 Create a Python Flask app that displays random cat pix<a class="headerlink" href="#231-create-a-python-flask-app-that-displays-random-cat-pix" title="Permanent link">ðŸ”—</a></h3>
<p>For the purposes of this workshop, we've created a fun little Python Flask app that displays a random cat <code>.gif</code> every time it is loaded - because, you know, who doesn't like cats?</p>
<p>Start by creating a directory called <code>flask-app</code> where we'll create the following files:</p>
<ul>
<li><a href="#apppy">app.py</a></li>
<li><a href="#requirementstxt">requirements.txt</a></li>
<li><a href="#templatesindexhtml">templates/index.html</a></li>
<li><a href="#dockerfile">Dockerfile</a></li>
</ul>
<p>Make sure to <code>cd flask-app</code> before you start creating the files, because you don't want to start adding a whole bunch of other random files to your image.</p>
<h4 id="apppy">app.py<a class="headerlink" href="#apppy" title="Permanent link">ðŸ”—</a></h4>
<p>Create the <strong>app.py</strong> with the following content:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># list of cat images</span>
<span class="n">images</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif1.gif&quot;</span><span class="p">,</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif2.gif&quot;</span><span class="p">,</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif3.gif&quot;</span><span class="p">,</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif4.gif&quot;</span><span class="p">,</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif5.gif&quot;</span><span class="p">,</span>
   <span class="s2">&quot;https://storage.googleapis.com/fchouteau-isae-cloud/gifs/gif6.gif&quot;</span><span class="p">,</span>
    <span class="p">]</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">index</span><span class="p">():</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">)</span>
</code></pre></div>
<h4 id="requirementstxt">requirements.txt<a class="headerlink" href="#requirementstxt" title="Permanent link">ðŸ”—</a></h4>
<p>In order to install the Python modules required for our app, we need to create a file called <strong>requirements.txt</strong> and add the following line to that file:</p>
<div class="highlight"><pre><span></span><code>flask
typer
</code></pre></div>
<h4 id="templatesindexhtml">templates/index.html<a class="headerlink" href="#templatesindexhtml" title="Permanent link">ðŸ”—</a></h4>
<p>Create a directory called <code>templates</code> and create an <strong>index.html</strong> file in that directory with the following content in it:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="nt">body</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">black</span><span class="p">;</span>
<span class="w">        </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nt">div</span><span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">px</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span>
<span class="w">        </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="w"> </span><span class="kc">solid</span><span class="w"> </span><span class="kc">white</span><span class="p">;</span>
<span class="w">        </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="k">text-align</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="nt">h4</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">text-transform</span><span class="p">:</span><span class="w"> </span><span class="kc">uppercase</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>Cat Gif of the day<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{url}}&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="232-write-a-dockerfile">2.3.2 Write a Dockerfile<a class="headerlink" href="#232-write-a-dockerfile" title="Permanent link">ðŸ”—</a></h3>
<p>We want to create a Docker image with this web app. As mentioned above, all user images are based on a <em>base image</em>. Since our application is written in Python, we will build our own Python image based on <a href="https://hub.docker.com/_/alpine">Alpine</a>. We'll do that using a <strong>Dockerfile</strong>.</p>
<p>A <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a> is a text file that contains a list of commands that the Docker daemon calls while creating an image. The Dockerfile contains all the information that Docker needs to know to run the app &#8212; a base Docker image to run from, location of your project code, any dependencies it has, and what commands to run at start-up. It is a simple way to automate the image creation process. The best part is that the <a href="https://docs.docker.com/engine/reference/builder/">commands</a> you write in a Dockerfile are <em>almost</em> identical to their equivalent Linux commands. This means you don't really have to learn new syntax to create your own Dockerfiles.</p>
<ol>
<li>Create a file called <strong>Dockerfile</strong>, and add content to it as described below.</li>
</ol>
<p>We'll start by specifying our base image, using the <code>FROM</code> keyword:</p>
<div class="highlight"><pre><span></span><code>FROM alpine:3.18
</code></pre></div>
<p>Note : If you use the latest version of alpine which is 3.20, follow this <a href="https://jairoandres.com/python-dependencies-break-your-system-if-you-want/">tutorial</a> to handle an error you might be getting</p>
<ol>
<li>The next step usually is to write the commands of copying the files and installing the dependencies. But first we will install the Python pip package to the alpine linux distribution. This will not just install the pip package but any other dependencies too, which includes the python interpreter. Add the following <a href="https://docs.docker.com/engine/reference/builder/#run">RUN</a> command next.</li>
</ol>
<div class="highlight"><pre><span></span><code>RUN apk add --update py-pip
</code></pre></div>
<ol>
<li>Let's add the files that make up the Flask Application.</li>
</ol>
<p>Install all Python requirements for our app to run. This will be accomplished by adding the lines:</p>
<div class="highlight"><pre><span></span><code>COPY requirements.txt /usr/src/app/
RUN pip install --no-cache-dir -r /usr/src/app/requirements.txt
</code></pre></div>
<p>Copy the files you have created earlier into our image by using <a href="https://docs.docker.com/engine/reference/builder/#copy">COPY</a>  command.</p>
<div class="highlight"><pre><span></span><code>COPY app.py /usr/src/app/
COPY templates/index.html /usr/src/app/templates/
</code></pre></div>
<ol>
<li>Specify the port number which needs to be exposed. Since our flask app is running on <code>5000</code> that's what we'll expose.</li>
</ol>
<div class="highlight"><pre><span></span><code>EXPOSE 5000
</code></pre></div>
<ol>
<li>The last step is the command for running the application which is simply - <code>python ./app.py</code>. Use the <a href="https://docs.docker.com/engine/reference/builder/#cmd">CMD</a> command to do that:</li>
</ol>
<div class="highlight"><pre><span></span><code>CMD [&quot;python&quot;, &quot;/usr/src/app/app.py&quot;]
</code></pre></div>
<p>The primary purpose of <code>CMD</code> is to tell the container which command it should run by default when it is started.</p>
<ol>
<li>Verify your Dockerfile.</li>
</ol>
<p>Our <code>Dockerfile</code> is now ready. This is how it looks:</p>
<div class="highlight"><pre><span></span><code># our base image
FROM alpine:3.18

# Install python and pip
RUN apk add --update py-pip

# install Python modules needed by the Python app
COPY requirements.txt /usr/src/app/
RUN pip install --no-cache-dir -r /usr/src/app/requirements.txt

# copy files required for the app to run
COPY app.py /usr/src/app/
COPY templates/index.html /usr/src/app/templates/

# tell the port number the container should expose
EXPOSE 5000

# run the application
CMD [&quot;python&quot;, &quot;/usr/src/app/app.py&quot;]
</code></pre></div>
<h3 id="233-build-the-image">2.3.3 Build the image<a class="headerlink" href="#233-build-the-image" title="Permanent link">ðŸ”—</a></h3>
<p>Now that you have your <code>Dockerfile</code>, you can build your image. The <code>docker build</code> command does the heavy-lifting of creating a docker image from a <code>Dockerfile</code>.</p>
<p>The <code>docker build</code> command is quite simple - it takes an optional tag name with the <code>-t</code> flag, and the location of the directory containing the <code>Dockerfile</code> - the <code>.</code> indicates the current directory:</p>
<p><code>docker build -t myfirstapp:1.0 .</code></p>
<div class="highlight"><pre><span></span><code>$ docker build -t myfirstapp:1.0 .
[+] Building 45.2s (10/10) FINISHED
 =&gt; [internal] load build definition from Dockerfile                       0.0s
 =&gt; [internal] load .dockerignore                                          0.0s
 =&gt; [internal] load metadata for docker.io/library/alpine:3.18             1.2s
 =&gt; [1/5] FROM docker.io/library/alpine:3.18                               2.1s
 =&gt; [2/5] RUN apk add --update py-pip                                     15.3s
 =&gt; [3/5] COPY requirements.txt /usr/src/app/                              0.0s
 =&gt; [4/5] RUN pip install --no-cache-dir -r /usr/src/app/requirements.txt 20.1s
 =&gt; [5/5] COPY app.py /usr/src/app/                                        0.0s
 =&gt; [6/5] COPY templates/index.html /usr/src/app/templates/                0.0s
 =&gt; exporting to image                                                     1.2s
 =&gt; =&gt; writing image sha256:2f7357a0805d...                                0.0s
 =&gt; =&gt; naming to docker.io/library/myfirstapp:1.0                          0.0s
</code></pre></div>
<p>If you don't have the <code>alpine:3.18</code> image, the client will first pull the image and then create your image. Therefore, your output on running the command will look different from mine. If everything went well, your image should be ready! Run <code>docker images</code> and see if your image (<code>myfirstapp:1.0</code>) shows.</p>
<h3 id="234-run-your-image">2.3.4 Run your image<a class="headerlink" href="#234-run-your-image" title="Permanent link">ðŸ”—</a></h3>
<p>The next step in this section is to run the image and see if it actually works.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8888</span>:5000<span class="w"> </span>--name<span class="w"> </span>myfirstapp<span class="w"> </span>myfirstapp:1.0
<span class="w"> </span>*<span class="w"> </span>Running<span class="w"> </span>on<span class="w"> </span>http://0.0.0.0:5000/<span class="w"> </span><span class="o">(</span>Press<span class="w"> </span>CTRL+C<span class="w"> </span>to<span class="w"> </span>quit<span class="o">)</span>
</code></pre></div>
<p>Head over to <code>http://localhost:8888</code> and your app should be live. If you're using Codespace, make sure port 8888 is forwarded.</p>
<p><img alt="catgif" src="https://raw.githubusercontent.com/docker/labs/master/beginner/images/catgif.png" /></p>
<p>Hit the Refresh button in the web browser to see a few more cat images.</p>
<h3 id="235-dockerfile-commands-summary">2.3.5 Dockerfile commands summary<a class="headerlink" href="#235-dockerfile-commands-summary" title="Permanent link">ðŸ”—</a></h3>
<p>Here's a quick summary of the few basic commands we used in our Dockerfile.</p>
<ul>
<li>
<p><code>FROM</code> starts the Dockerfile. It is a requirement that the Dockerfile must start with the <code>FROM</code> command. Images are created in layers, which means you can use another image as the base image for your own. The <code>FROM</code> command defines your base layer. As arguments, it takes the name of the image. Optionally, you can add the Docker Hub username and image version, in the format <code>username/imagename:version</code>.</p>
</li>
<li>
<p><code>RUN</code> is used to build up the Image you're creating. For each <code>RUN</code> command, Docker will run the command then create a new layer of the image. This way you can roll back your image to previous states easily. The syntax for a <code>RUN</code> instruction is to place the full text of the shell command after the <code>RUN</code> (e.g., <code>RUN mkdir /user/local/foo</code>). This will automatically run in a <code>/bin/sh</code> shell. You can define a different shell like this: <code>RUN /bin/bash -c 'mkdir /user/local/foo'</code></p>
</li>
<li>
<p><code>COPY</code> copies local files into the container.</p>
</li>
<li>
<p><code>CMD</code> defines the commands that will run on the Image at start-up. Unlike a <code>RUN</code>, this does not create a new layer for the Image, but simply runs the command. There can only be one <code>CMD</code> per a Dockerfile/Image. If you need to run multiple commands, the best way to do that is to have the <code>CMD</code> run a script. <code>CMD</code> requires that you tell it where to run the command, unlike <code>RUN</code>. So example <code>CMD</code> commands would be:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>  CMD [&quot;python&quot;, &quot;./app.py&quot;]

  CMD [&quot;/bin/bash&quot;, &quot;echo&quot;, &quot;Hello World&quot;]
</code></pre></div>
<ul>
<li><code>EXPOSE</code> creates a hint for users of an image which ports provide services. It is included in the information which
 can be retrieved via <code>$ docker inspect &lt;container-id&gt;</code>.     </li>
</ul>
<blockquote>
<p><strong>Note:</strong> The <code>EXPOSE</code> command does not actually make any ports accessible to the host! Instead, this requires 
publishing ports by means of the <code>-p</code> flag when using <code>$ docker run</code>.  </p>
</blockquote>
<ul>
<li><code>WORKDIR</code> sets the working directory for any <code>RUN</code>, <code>CMD</code>, <code>ENTRYPOINT</code>, <code>COPY</code> and <code>ADD</code> instructions that follow it. It's good practice to set this explicitly rather than relying on the default (<code>/</code>).</li>
</ul>
<blockquote>
<p><strong>Note:</strong> To push your image to a registry, use the <code>docker push</code> command (not a Dockerfile instruction). Example: <code>docker push username/imagename:tag</code></p>
<p><strong>Note:</strong> If you want to learn more about Dockerfiles, check out <a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/">Best practices for writing Dockerfiles</a>.</p>
</blockquote>
<h3 id="236-build-context">2.3.6 Build context<a class="headerlink" href="#236-build-context" title="Permanent link">ðŸ”—</a></h3>
<p>When you run <code>docker build</code>, Docker sends all files in the current directory to the Docker daemon. This is called the <strong>build context</strong>. Keep your build directory clean to speed up builds.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For details on excluding files with <code>.dockerignore</code>, see the Advanced section at the end.</p>
</div>
<div class="admonition success">
<p class="admonition-title">What You Learned</p>
<ul>
<li><strong>Running web apps</strong>: Use <code>-d</code> for detached mode, <code>-p host:container</code> for port mapping</li>
<li><strong>Building images</strong>: Write a <code>Dockerfile</code>, then <code>docker build -t name:tag .</code></li>
<li><strong>Dockerfile instructions</strong>: <code>FROM</code>, <code>RUN</code>, <code>COPY</code>, <code>EXPOSE</code>, <code>CMD</code> and their purposes</li>
<li><strong>Build context &amp; .dockerignore</strong>: Control what gets sent to the Docker daemon</li>
</ul>
</div>
<h2 id="3-running-cli-apps-with-docker-passing-data-at-runtime">3. Running CLI Apps with Docker: Passing Data at Runtime<a class="headerlink" href="#3-running-cli-apps-with-docker-passing-data-at-runtime" title="Permanent link">ðŸ”—</a></h2>
<p>In Section 2, you built a static website where all content was baked into the image. Now we'll package <strong>CLI applications</strong> that process data passed at runtime - the pattern used for ML training.</p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Static Web (Section 2)</th>
<th>CLI App (Section 3)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content</td>
<td>Baked into image at build time</td>
<td>Passed at runtime via volumes</td>
</tr>
<tr>
<td>Rebuild needed?</td>
<td>Yes, for any content change</td>
<td>No - same image, different data</td>
</tr>
<tr>
<td>Use case</td>
<td>Web servers, APIs</td>
<td>Training scripts, data processing</td>
</tr>
</tbody>
</table>
<h3 id="31-volume-mounting-sharing-files-with-containers">3.1 Volume Mounting: Sharing Files with Containers<a class="headerlink" href="#31-volume-mounting-sharing-files-with-containers" title="Permanent link">ðŸ”—</a></h3>
<p>The <code>-v</code> flag connects a folder on your host to a path inside the container, which allows to share files at <strong>runtime</strong>.</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span>/path/on/host:/path/in/container<span class="w"> </span>my-image
</code></pre></div>
<p>For example with <code>./</code> in host and <code>/app/</code> in container,</p>
<div class="highlight"><pre><span></span><code>Host Machine              Container
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ./configs/   â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚ /app/configs â”‚
â”‚ ./outputs/   â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚ /app/outputs â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
<ul>
<li>Files are shared bidirectionally (changes appear on both sides)</li>
<li>Container paths must be absolute (<code>/app/configs</code>, not <code>configs</code>)</li>
<li>No image rebuild needed - just run with different volumes</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Now Let's Build This</p>
<p>In the following exercises, you'll create a training CLI, package it in Docker, and run it with different config files <strong>without rebuilding the image</strong>.</p>
</div>
<h3 id="32-a-local-cli-application">3.2 A local CLI application<a class="headerlink" href="#32-a-local-cli-application" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>In the <code>docker/app.py</code>, I provided you with the following code :</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">typer</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">typer</span><span class="o">.</span><span class="n">Typer</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">run_training</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Path</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
            <span class="n">exists</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">file_okay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">dir_okay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">writable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">readable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">resolve_path</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span>
        <span class="n">Path</span><span class="p">,</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">Option</span><span class="p">(</span>
            <span class="n">dir_okay</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">writable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">readable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">resolve_path</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">file_okay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config file contents: </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Running training in </span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_dir</span> <span class="o">/</span> <span class="s2">&quot;results.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Training successful !&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="p">()</span>
</code></pre></div>
<ul>
<li>You can the application locally using <code>pip install typer</code>then <code>python app.py say-hello {my name}</code> or <code>python app.py run-training --config {my config} --output-dir {somewhere}</code></li>
</ul>
<h3 id="33-packaging-it-in-a-dockerfile">3.3 Packaging it in a Dockerfile<a class="headerlink" href="#33-packaging-it-in-a-dockerfile" title="Permanent link">ðŸ”—</a></h3>
<p>We will now package it in a docker file</p>
<ul>
<li>A provided a <code>Dockerfile</code> in the <code>docker/</code> folder. Compared to the previous one, here are the key differences:</li>
<li>Replaced <code>CMD ["python", "/usr/src/app/app.py"]</code></li>
<li>With <code>ENTRYPOINT ["python", "/usr/src/app/app.py"]</code></li>
</ul>
<div class="admonition info">
<p class="admonition-title">CMD vs ENTRYPOINT</p>
<ul>
<li><strong>CMD</strong>: Arguments in <code>docker run myimage arg1</code> <strong>replace</strong> the entire CMD</li>
<li><strong>ENTRYPOINT</strong>: Arguments in <code>docker run myimage arg1</code> are <strong>appended</strong> to ENTRYPOINT</li>
</ul>
<p>For CLI apps, use ENTRYPOINT so users pass arguments naturally:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>myimage<span class="w"> </span>say-hello<span class="w"> </span>Alice<span class="w">   </span><span class="c1"># Runs: python app.py say-hello Alice</span>
</code></pre></div></p>
<p>See also: <a href="https://spacelift.io/blog/docker-entrypoint-vs-cmd">CMD vs ENTRYPOINT deep dive</a></p>
</div>
<ul>
<li>Build the docker image for that application using what you learned.</li>
</ul>
<h3 id="34-running-the-cli-app">3.4 Running the CLI App<a class="headerlink" href="#34-running-the-cli-app" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>Now to run the CLI you just have to pass the arguments when running the docker <code>docker run --rm {your image} {your args}</code>. Try it with <code>docker run --rm {your image} say-hello {your name}</code></li>
</ul>
<p>Now you know how to pass arguments to CLI applications in docker containers.</p>
<h3 id="35-mounting-volumes">3.5 Mounting volumes<a class="headerlink" href="#35-mounting-volumes" title="Permanent link">ðŸ”—</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>once you have built your container and it works, don't rebuild it again ! We will test the volume mounting options now</p>
</div>
<ul>
<li>In order to pass a config file, or data to your docker, you need to make it available to your docker. To do that, we have to <a href="https://docs.docker.com/storage/volumes/">mount volumes</a></li>
</ul>
<p>Create a dummy config file (<code>config.txt</code>) in a folder (e.g., <code>configs/</code>) and an empty <code>outputs/</code> folder. Then mount them when you run the container:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/configs:/app/configs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/outputs:/app/outputs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="o">{</span>your<span class="w"> </span>image<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>run-training<span class="w"> </span>--config<span class="w"> </span>/app/configs/config.txt<span class="w"> </span>--output-dir<span class="w"> </span>/app/outputs/
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Container Paths vs Host Paths</p>
<p>The paths after <code>run-training</code> are <strong>container paths</strong> (where Docker sees the files), not your local paths:</p>
<ul>
<li><code>$(pwd)/configs</code> â†’ your local folder (host)</li>
<li><code>/app/configs</code> â†’ where Docker mounts it (container)</li>
</ul>
<p>Your CLI receives <code>/app/configs/config.txt</code> because that's where the file exists inside the container.</p>
</div>
<div class="admonition success">
<p class="admonition-title">You've Mastered This When:</p>
<ol>
<li>You run training with <strong>different config files</strong> without rebuilding the image</li>
<li>Output files appear in your <strong>local <code>outputs/</code> folder</strong> after the container exits</li>
<li>You understand why the CLI uses <code>/app/configs</code> (container path) not <code>./configs</code> (host path)</li>
</ol>
</div>
<h3 id="36-troubleshooting-volume-mounts">3.6 Troubleshooting Volume Mounts<a class="headerlink" href="#36-troubleshooting-volume-mounts" title="Permanent link">ðŸ”—</a></h3>
<table>
<thead>
<tr>
<th>Problem</th>
<th>Likely Cause</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>"File not found" in container</td>
<td>Wrong mount path</td>
<td>Verify with <code>docker run --rm -v $(pwd)/configs:/app/configs myimage ls /app/configs</code></td>
</tr>
<tr>
<td>Changes don't appear on host</td>
<td>Volume not mounted</td>
<td>Check <code>-v</code> syntax is <code>host:container</code>, not reversed</td>
</tr>
<tr>
<td>Permission denied</td>
<td>Host dir permissions</td>
<td>Run <code>chmod -R 755 ./outputs</code> or check file ownership</td>
</tr>
</tbody>
</table>
<div class="admonition success">
<p class="admonition-title">What You Learned</p>
<ul>
<li><strong>ENTRYPOINT vs CMD</strong>: <code>ENTRYPOINT</code> for CLI apps that accept arguments</li>
<li><strong>Volume mounting</strong>: <code>-v host_path:container_path</code> connects local folders to containers</li>
<li><strong>Path distinction</strong>: Host paths for <code>-v</code>, container paths for your CLI</li>
<li><strong>ML training pattern</strong>: Mount config/data in, mount outputs out, keep image unchanged</li>
</ul>
</div>
<h2 id="4-containers-registry">4. Containers Registry<a class="headerlink" href="#4-containers-registry" title="Permanent link">ðŸ”—</a></h2>
<p>Remember Container Registries? Here are <a href="https://blogs.vmware.com/cloudnative/2017/06/21/what-is-a-container-registry/">some explainers</a></p>
<p>The main container registry is dockerhub, <a href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<p>All docker engines that have access to the internet have access to this main hub, and this is where we pulled our base images from before</p>
<p>Example, the <a href="https://hub.docker.com/_/python">Python Image</a></p>
<p>Google Cloud has an <a href="https://cloud.google.com/artifact-registry/docs/repositories/create-repos">Artifacts Registry</a> per project, which ensures the docker images you build are accessible for the people who have access to your project only.</p>
<p>We will follow <a href="https://cloud.google.com/artifact-registry/docs/docker/store-docker-container-images">this tutorial</a> to push our images to artifact registry</p>
<ul>
<li>
<p>First, create a Docker Artifact registry using this <a href="https://cloud.google.com/artifact-registry/docs/repositories/create-repos#create-console">tutorial</a>, example <code>fch-sdd2425-artifacts-registry</code> (that's mine, name it with your name). Set the repository in <code>multi-region/europe</code></p>
</li>
<li>
<p>Pushing our images requires authenticating, <code>gcloud auth configure-docker europe-docker.pkg.dev</code></p>
</li>
<li>
<p>Pushing our images requires tagging them in a <a href="https://cloud.google.com/artifact-registry/docs/docker/store-docker-container-images#add-image">specific way</a> : <code>europe-docker.pkg.dev/${PROJECT_ID}/${REPO_ID}/${IMAGE}:${TAG}</code></p>
</li>
<li>
<p>Use the <a href="https://cloud.google.com/container-registry/docs/pushing-and-pulling#tag_the_local_image_with_the_registry_name">docker cli to tag</a> your previous <code>myfirstapp</code> image to the right namespace</p>
</li>
</ul>
<p><code>docker tag myfirstapp:1.0 europe-docker.pkg.dev/${PROJECT_ID}/${REPO_ID}/myfirstapp:1.0</code></p>
<ul>
<li>Upload it on container registry </li>
</ul>
<p><code>docker push europe-docker.pkg.dev/${PROJECT_ID}/${REPO_ID}/[IMAGE]:[TAG]</code></p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>to get your project id: <code>PROJECT_ID=$(gcloud config get-value project 2&gt; /dev/null)</code>
to get your artifact repository id look at <a href="https://console.cloud.google.com/artifacts/docker/">this page</a>, you can get your project id this way as well</p>
</div>
<ul>
<li>Go to your artifact registry <a href="https://console.cloud.google.com/artifacts">https://console.cloud.google.com/artifacts</a>, you should see your docker image :)</li>
</ul>
<div class="admonition success">
<p class="admonition-title">What You Learned</p>
<ul>
<li><strong>Container registries</strong>: Central storage for Docker images (like GitHub for code)</li>
<li><strong>Docker Hub vs private registries</strong>: Public images vs organization-private images</li>
<li><strong>GCP Artifact Registry</strong>: Google's managed container registry service</li>
<li><strong>Tag and push workflow</strong>: <code>docker tag</code> to rename, <code>docker push</code> to upload</li>
<li><strong>Image naming convention</strong>: <code>registry/project/image:tag</code> format</li>
</ul>
</div>
<hr />
<h2 id="what-youve-learned">What You've Learned<a class="headerlink" href="#what-youve-learned" title="Permanent link">ðŸ”—</a></h2>
<div class="admonition success">
<p class="admonition-title">Core Docker Skills</p>
<p>You now know how to:</p>
<ul>
<li><strong>Pull and run</strong> containers from Docker Hub</li>
<li><strong>Build custom images</strong> with Dockerfiles</li>
<li><strong>Mount volumes</strong> to pass data at runtime</li>
<li><strong>Push images</strong> to a container registry</li>
</ul>
</div>
<h2 id="whats-next">What's Next<a class="headerlink" href="#whats-next" title="Permanent link">ðŸ”—</a></h2>
<p>In Day 2, you'll combine Docker with GCP to deploy containerized ML models to the cloud.</p>
<hr />
<p><em>The following sections are </em><em>Advanced</em><em> - useful reference material that you can explore after completing the core content.</em></p>
<hr />
<h2 id="advanced-pre-built-data-science-environments">Advanced - Pre-built Data Science Environments<a class="headerlink" href="#advanced-pre-built-data-science-environments" title="Permanent link">ðŸ”—</a></h2>
<p>Docker images like <a href="https://jupyter-docker-stacks.readthedocs.io/en/latest/">Jupyter Docker Stacks</a> provide fully configured data science environments. These images combine:</p>
<ul>
<li><strong>Volume mounting</strong>: Connect your local notebooks to the container</li>
<li><strong>Port forwarding</strong>: Access Jupyter in your browser</li>
</ul>
<p>Example usage:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-p<span class="w"> </span><span class="m">8888</span>:8888<span class="w"> </span>-v<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/home/jovyan/work<span class="w"> </span>jupyter/scipy-notebook
</code></pre></div></p>
<p>This patternâ€”pulling a pre-configured image and mounting your dataâ€”is useful for:</p>
<ul>
<li>Standardizing team development environments</li>
<li>Quickly onboarding new team members</li>
<li>Testing dependency upgrades without affecting your system</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These images can be large (several GB). Try this at home rather than during class to avoid network congestion.</p>
</div>
<h2 id="advanced-docker-compose-preview">Advanced - Docker Compose Preview<a class="headerlink" href="#advanced-docker-compose-preview" title="Permanent link">ðŸ”—</a></h2>
<p><strong>Docker Compose</strong> manages multi-container applications with a single YAML file. Instead of running multiple <code>docker run</code> commands, you define your entire stack in <code>docker-compose.yml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp:1.0</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8080:5000&quot;</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:alpine</span>
</code></pre></div>
<p>Then start everything with:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up
</code></pre></div></p>
<p>You'll use Docker Compose on Day 2 when deploying a multi-container ML application (API backend + web frontend). For now, just know it exists.</p>
<p><strong>Further reading:</strong> <a href="https://docs.docker.com/compose/gettingstarted/">Docker Compose Getting Started</a></p>
<h2 id="advanced-cloud-build">Advanced - Cloud Build<a class="headerlink" href="#advanced-cloud-build" title="Permanent link">ðŸ”—</a></h2>
<p><strong>Google Cloud Build</strong> builds Docker images in the cloud, without needing Docker installed locally. This is useful for CI/CD pipelines.</p>
<p>Instead of:
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>myimage<span class="w"> </span>.
docker<span class="w"> </span>push<span class="w"> </span>europe-docker.pkg.dev/...
</code></pre></div></p>
<p>You run:
<div class="highlight"><pre><span></span><code>gcloud<span class="w"> </span>builds<span class="w"> </span>submit<span class="w"> </span>--tag<span class="w"> </span>europe-docker.pkg.dev/<span class="nv">$PROJECT_ID</span>/<span class="nv">$REPO</span>/myimage<span class="w"> </span>.
</code></pre></div></p>
<p>Cloud Build pulls your code, builds the image on Google's infrastructure, and pushes to Artifact Registry automatically. You'll see this in action if you continue with GCP-based ML deployments.</p>
<h2 id="advanced-going-further">Advanced - Going Further<a class="headerlink" href="#advanced-going-further" title="Permanent link">ðŸ”—</a></h2>
<p><a href="https://container.training/">https://container.training/</a></p>
<h2 id="advanced-docker-build-context-and-dockerignore">Advanced - Docker Build Context and .dockerignore<a class="headerlink" href="#advanced-docker-build-context-and-dockerignore" title="Permanent link">ðŸ”—</a></h2>
<p>When you run <code>docker build</code>, Docker sends all files in the current directory (the <strong>build context</strong>) to the Docker daemon. This can slow down builds and bloat your image if unnecessary files are included.</p>
<h3 id="the-build-context">The build context<a class="headerlink" href="#the-build-context" title="Permanent link">ðŸ”—</a></h3>
<p>The build context is everything in the directory you specify when running <code>docker build</code>. For example:</p>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>myapp:1.0<span class="w"> </span>.
</code></pre></div>
<p>The <code>.</code> means "use the current directory as the build context". Docker will send all files in this directory to the daemon, which can be slow if you have large files (datasets, model weights, etc.).</p>
<h3 id="using-dockerignore">Using .dockerignore<a class="headerlink" href="#using-dockerignore" title="Permanent link">ðŸ”—</a></h3>
<p>Create a <code>.dockerignore</code> file to exclude files from the build context. This works like <code>.gitignore</code>:</p>
<div class="highlight"><pre><span></span><code># .dockerignore example
.git
__pycache__
*.pyc
.env
data/
models/
*.tar.gz
node_modules/
.vscode/
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Always create a <code>.dockerignore</code> file in your project. It speeds up builds and prevents accidentally including sensitive files (like <code>.env</code> with secrets) in your image.</p>
</div>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">ðŸ”—</a></h2>
<h3 id="debugging-containers">Debugging Containers<a class="headerlink" href="#debugging-containers" title="Permanent link">ðŸ”—</a></h3>
<p>When things go wrong, these commands will help you troubleshoot:</p>
<h4 id="view-container-logs">View container logs<a class="headerlink" href="#view-container-logs" title="Permanent link">ðŸ”—</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># See logs from a running or stopped container</span>
docker<span class="w"> </span>logs<span class="w"> </span>&lt;container-name-or-id&gt;

<span class="c1"># Follow logs in real-time (like tail -f)</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>&lt;container-name-or-id&gt;

<span class="c1"># Show only the last 100 lines</span>
docker<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">100</span><span class="w"> </span>&lt;container-name-or-id&gt;
</code></pre></div>
<h4 id="get-a-shell-inside-a-running-container">Get a shell inside a running container<a class="headerlink" href="#get-a-shell-inside-a-running-container" title="Permanent link">ðŸ”—</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># Open an interactive shell in a running container</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container-name-or-id&gt;<span class="w"> </span>/bin/sh

<span class="c1"># Or use bash if available</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container-name-or-id&gt;<span class="w"> </span>/bin/bash
</code></pre></div>
<h4 id="inspect-container-details">Inspect container details<a class="headerlink" href="#inspect-container-details" title="Permanent link">ðŸ”—</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># See detailed container configuration (ports, volumes, env vars, etc.)</span>
docker<span class="w"> </span>inspect<span class="w"> </span>&lt;container-name-or-id&gt;

<span class="c1"># See resource usage (CPU, memory)</span>
docker<span class="w"> </span>stats<span class="w"> </span>&lt;container-name-or-id&gt;
</code></pre></div>
<h4 id="debug-a-failed-build">Debug a failed build<a class="headerlink" href="#debug-a-failed-build" title="Permanent link">ðŸ”—</a></h4>
<p>If your build fails, you can run a container from the last successful layer:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Find the last successful layer ID in the build output, then:</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>&lt;layer-id&gt;<span class="w"> </span>/bin/sh
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These debugging skills are essential when deploying ML models. Container logs are often the first place to check when a model serving endpoint fails.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": ".", "features": ["toc.autohide", "navigation.sections"], "search": "assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>